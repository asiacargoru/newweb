# Азия Транс Карго — структура проекта

Проект логистической компании с упором на ФЗ-152, автогенерацию контента и SEO.

## Технологии
- Backend: FastAPI (Python 3.11+)
- Frontend: Next.js 14+ (App Router, TypeScript)
- DB: PostgreSQL 15+
- Cache: Redis
- Task Queue: Celery + Redis
- Admin: AdminJS (через Node, проксируется через nginx, интеграция с API FastAPI)

## Требования
1. Все настройки через переменные окружения (`.env`).
2. Поддержка ФЗ-152: шифрование ПДн, журнал аудита, согласия.
3. Готовность к автогенерации статей через OpenAI.
4. SEO-оптимизация из коробки.
5. Все данные хранятся на территории РФ (PostgreSQL/Redis инстансы в РФ, настройка в DevOps).

## Структура
См. `docker-compose.yml`, папки `backend`, `frontend`, `nginx`.
Внутри файлов оставлены комментарии, что и как следует реализовать.

## Быстрый старт (dev)
1. Скопируйте `.env.example` в `.env` и заполните значения.
2. Запустите docker-compose:
   ```bash
   docker compose up -d --build
   ```
3. Откройте Nginx-прокси: `http://localhost:8080`.

## ФЗ-152
- Используем `cryptography` для симметричного шифрования чувствительных полей (e.g. телефон, email).
- Ведём `audit_log` для фиксации действий операторов и сервисов.
- Согласия (`consents`) храним с версией политики, источником и метаданными.
- Доступ к данным — только через API, аудируем операции.

## AdminJS
- Предполагается отдельный Node-процесс (или в составе frontend), который рендерит админку и обращается к REST API FastAPI.
- Проксирование через `nginx` по пути `/admin`.
- Ресурсы (модели) отображаются на основе эндпоинтов FastAPI.

## SEO
- Next.js генерирует метаданные, sitemap/robots можно добавить в дальнейшем.
- `lib/seo.ts` включает хелперы для базовых тегов.

## Автогенерация статей
- Celery-задача вызывает `services/openai_service.py` для генерации текста.
- Результат сохраняется в БД, далее публикуется на фронтенде.

## Хранение данных в РФ
- Убедитесь, что хостинг/серверы БД и Redis расположены на территории РФ.
- Для прод — используйте облако/сервер в РФ и настройте бэкапы.